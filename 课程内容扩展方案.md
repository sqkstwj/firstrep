# 酷瓜云课堂课程内容扩展方案

## 🎯 **现有功能分析**

### 支持的章节类型：
1. **点播章节 (MODEL_VOD = 1)** - 视频内容
2. **直播章节 (MODEL_LIVE = 2)** - 直播内容
3. **图文章节 (MODEL_READ = 3)** - 富文本内容
4. **面授章节 (MODEL_OFFLINE = 4)** - 线下课程

### 现有相关功能：
- **问答系统** - 独立的问答模块
- **文章系统** - 独立的文章模块
- **资源下载** - 支持文件下载

## 🚀 **方案一：使用现有图文章节功能**

### 适用场景：
- 上传PPT、PDF等文档
- 添加练习题目
- 插入图片、文字说明
- 嵌入外部内容

### 操作步骤：

#### 1. 创建图文章节
```
后台 → 课程管理 → 章节管理 → 添加章节
选择课程模式：图文
```

#### 2. 编辑图文内容
图文章节支持富文本编辑器，可以：
- 插入图片
- 上传附件（PPT、PDF）
- 编写文字内容
- 插入表格
- 嵌入HTML代码

#### 3. 上传PPT/PDF的方法
```html
<!-- 在图文编辑器中可以这样嵌入 -->
<p>课程PPT下载：</p>
<a href="http://你的MinIO地址:9000/course-files/lesson1.ppt" target="_blank">
  📄 第一课PPT下载
</a>

<!-- 或者嵌入在线预览 -->
<iframe src="http://你的MinIO地址:9000/course-files/lesson1.pdf" 
        width="100%" height="600px">
</iframe>
```

## 🚀 **方案二：扩展现有功能**

### 2.1 利用资源下载功能

#### 数据库结构：
```sql
-- 资源表
kg_resource (
    id,
    title,           -- 资源标题
    summary,         -- 资源描述
    upload_id,       -- 上传文件ID
    download_count,  -- 下载次数
    create_time
)

-- 上传文件表
kg_upload (
    id,
    name,           -- 文件名
    path,           -- 文件路径
    size,           -- 文件大小
    type,           -- 文件类型
    md5
)
```

#### 操作步骤：
1. **上传资源文件**
   ```
   后台 → 内容管理 → 资源管理 → 添加资源
   ```

2. **在章节中引用资源**
   - 在图文章节中添加资源下载链接
   - 或在课程介绍中添加相关资源

### 2.2 结合问答系统

#### 创建课程相关问题：
```
后台 → 内容管理 → 问答管理 → 添加问题
```

#### 在课程中引用问题：
- 在图文章节中添加问题链接
- 引导学员到问答区讨论

## 🚀 **方案三：自定义开发扩展**

### 3.1 添加新的章节类型

#### 修改数据库：
```sql
-- 为Chapter模型添加新的模式
-- 在Course.php中添加：
const MODEL_EXERCISE = 5;  -- 练习题
const MODEL_DOCUMENT = 6;  -- 文档资料
```

#### 创建对应的扩展表：
```sql
-- 练习题扩展表
CREATE TABLE kg_chapter_exercise (
    id INT PRIMARY KEY AUTO_INCREMENT,
    course_id INT,
    chapter_id INT,
    questions JSON,           -- 题目数据
    time_limit INT,          -- 答题时间限制
    pass_score INT,          -- 及格分数
    create_time INT,
    update_time INT
);

-- 文档扩展表  
CREATE TABLE kg_chapter_document (
    id INT PRIMARY KEY AUTO_INCREMENT,
    course_id INT,
    chapter_id INT,
    file_url VARCHAR(500),   -- 文档地址
    file_type VARCHAR(50),   -- 文档类型(ppt,pdf,doc)
    preview_enabled TINYINT, -- 是否支持在线预览
    create_time INT,
    update_time INT
);
```

### 3.2 创建管理界面

#### 练习题编辑界面：
```html
<!-- edit_lesson_exercise.volt -->
<form class="layui-form" method="POST">
    <div class="layui-form-item">
        <label class="layui-form-label">题目类型</label>
        <div class="layui-input-block">
            <select name="question_type">
                <option value="single">单选题</option>
                <option value="multiple">多选题</option>
                <option value="judge">判断题</option>
                <option value="fill">填空题</option>
            </select>
        </div>
    </div>
    
    <div class="layui-form-item">
        <label class="layui-form-label">题目内容</label>
        <div class="layui-input-block">
            <textarea name="question_content" class="layui-textarea"></textarea>
        </div>
    </div>
    
    <div class="layui-form-item">
        <label class="layui-form-label">选项设置</label>
        <div class="layui-input-block">
            <div id="options-container">
                <!-- 动态添加选项 -->
            </div>
            <button type="button" class="layui-btn layui-btn-sm" id="add-option">添加选项</button>
        </div>
    </div>
    
    <div class="layui-form-item">
        <label class="layui-form-label">正确答案</label>
        <div class="layui-input-block">
            <input type="text" name="correct_answer" class="layui-input">
        </div>
    </div>
</form>
```

#### 文档上传界面：
```html
<!-- edit_lesson_document.volt -->
<form class="layui-form" method="POST">
    <div class="layui-form-item">
        <label class="layui-form-label">文档类型</label>
        <div class="layui-input-block">
            <select name="document_type">
                <option value="ppt">PPT演示文稿</option>
                <option value="pdf">PDF文档</option>
                <option value="doc">Word文档</option>
                <option value="excel">Excel表格</option>
            </select>
        </div>
    </div>
    
    <div class="layui-form-item">
        <label class="layui-form-label">文档地址</label>
        <div class="layui-input-block">
            <input type="text" name="file_url" class="layui-input" 
                   placeholder="http://你的MinIO地址:9000/course-files/document.pdf">
        </div>
    </div>
    
    <div class="layui-form-item">
        <label class="layui-form-label">在线预览</label>
        <div class="layui-input-block">
            <input type="checkbox" name="preview_enabled" lay-skin="switch" lay-text="开启|关闭">
        </div>
    </div>
</form>
```

## 🎯 **推荐的实际操作方案**

### 方案A：快速实现（推荐）

#### 1. 使用图文章节上传PPT
```html
<!-- 在图文编辑器中添加 -->
<h3>📚 课程资料</h3>
<div style="border: 1px solid #ddd; padding: 15px; margin: 10px 0;">
    <h4>PPT下载</h4>
    <p>
        <a href="http://192.168.1.24:9000/course-files/lesson1.ppt" 
           target="_blank" style="color: #1890ff;">
            📄 第一课：医疗器械基础知识.ppt
        </a>
    </p>
    <p><small>文件大小：2.5MB | 更新时间：2024-01-15</small></p>
</div>
```

#### 2. 添加练习题目
```html
<!-- 在图文编辑器中添加练习题 -->
<h3>🧠 课后练习</h3>
<div style="background: #f6f8fa; padding: 20px; border-radius: 8px;">
    <h4>单选题</h4>
    <p><strong>1. 医疗器械UDI的全称是什么？</strong></p>
    <div style="margin-left: 20px;">
        <p>A. Unique Device Identifier</p>
        <p>B. Universal Device Information</p>
        <p>C. Unified Device Identity</p>
        <p>D. Unique Data Interface</p>
    </div>
    <details style="margin-top: 10px;">
        <summary style="cursor: pointer; color: #1890ff;">点击查看答案</summary>
        <p style="color: #52c41a; font-weight: bold;">正确答案：A</p>
        <p>解析：UDI是Unique Device Identifier的缩写，即医疗器械唯一标识。</p>
    </details>
</div>
```

#### 3. 嵌入在线文档预览
```html
<!-- 使用第三方在线预览服务 -->
<h3>📖 在线文档</h3>
<iframe src="https://view.officeapps.live.com/op/embed.aspx?src=http://192.168.1.24:9000/course-files/lesson1.ppt" 
        width="100%" height="500px" frameborder="0">
</iframe>

<!-- 或者使用PDF.js预览PDF -->
<iframe src="/static/pdfjs/web/viewer.html?file=http://192.168.1.24:9000/course-files/lesson1.pdf" 
        width="100%" height="600px">
</iframe>
```

### 方案B：章节组合使用

#### 课程结构示例：
```
第一章 医疗器械概述
├── 1.1 介绍视频 (点播章节)
├── 1.2 基础知识PPT (图文章节)
├── 1.3 法规文件 (图文章节)
└── 1.4 课后练习 (图文章节)

第二章 UDI系统详解
├── 2.1 系统介绍视频 (点播章节)
├── 2.2 操作演示 (点播章节)
├── 2.3 操作手册PDF (图文章节)
└── 2.4 实操练习 (图文章节)
```

## 🔧 **具体实施步骤**

### 步骤1：准备资料
1. **视频文件** → 上传为点播章节
2. **PPT文件** → 上传到MinIO，在图文章节中引用
3. **PDF文档** → 上传到MinIO，在图文章节中引用  
4. **练习题目** → 编写为HTML格式，放入图文章节

### 步骤2：创建章节结构
```
后台 → 课程管理 → 章节管理
```

#### 添加不同类型的章节：
- **视频章节**：选择"点播"模式
- **资料章节**：选择"图文"模式
- **练习章节**：选择"图文"模式

### 步骤3：内容制作

#### PPT上传方式：
```bash
# 1. 上传PPT到MinIO
# 2. 获取外链地址：http://192.168.1.24:9000/course-files/lesson1.ppt
# 3. 在图文章节中添加下载链接
```

#### 练习题制作：
```html
<!-- 使用HTML制作交互式练习题 -->
<div class="exercise-container">
    <h3>练习题</h3>
    <div class="question">
        <p><strong>题目1：</strong>请选择正确答案</p>
        <label><input type="radio" name="q1" value="A"> A. 选项A</label><br>
        <label><input type="radio" name="q1" value="B"> B. 选项B</label><br>
        <label><input type="radio" name="q1" value="C"> C. 选项C</label><br>
        <button onclick="checkAnswer('q1', 'B')">提交答案</button>
        <div id="result-q1" style="display:none;"></div>
    </div>
</div>

<script>
function checkAnswer(questionName, correctAnswer) {
    var selected = document.querySelector('input[name="' + questionName + '"]:checked');
    var resultDiv = document.getElementById('result-' + questionName);
    
    if (selected) {
        if (selected.value === correctAnswer) {
            resultDiv.innerHTML = '<p style="color: green;">✓ 回答正确！</p>';
        } else {
            resultDiv.innerHTML = '<p style="color: red;">✗ 回答错误，正确答案是：' + correctAnswer + '</p>';
        }
        resultDiv.style.display = 'block';
    } else {
        alert('请选择一个答案');
    }
}
</script>
```

## 💡 **最佳实践建议**

### 1. 章节命名规范
```
1.1 【视频】医疗器械概述
1.2 【资料】基础知识PPT
1.3 【文档】法规文件汇编
1.4 【练习】课后测试题
```

### 2. 文件组织结构
```
MinIO存储结构：
course-files/
├── videos/          # 视频文件
├── documents/       # 文档文件
│   ├── ppt/        # PPT文件
│   ├── pdf/        # PDF文件
│   └── doc/        # Word文档
└── images/         # 图片文件
```

### 3. 用户体验优化
- 在章节标题中标明内容类型
- 提供文件大小和格式信息
- 添加预览功能
- 设置合理的学习顺序

---

**总结：**
通过以上方案，您可以在现有的酷瓜云课堂系统中实现：
✅ PPT文档的上传和下载
✅ PDF文件的在线预览
✅ 交互式练习题目
✅ 多媒体混合学习内容
✅ 完整的课程学习路径